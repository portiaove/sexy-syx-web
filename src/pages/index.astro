---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import hero from "../assets/home/main.jpg";
---

<Layout>
  <section
    id="hero"
    class="relative mt-16 h-[110vh] md:h-[150vh] w-full overflow-hidden"
  >
    <Image
      src={hero}
      alt="Vista del estudio fotográfico"
      widths={[640, 1024, 1280, 1536, 1920, 2560]}
      sizes="100vw"
      quality={92}
      loading="eager"
      class="absolute inset-0 w-full h-full object-cover object-center"
    />

    <!-- Sentinel: 80 % en móvil · 66 % en desktop -->
    <div
      id="hero-sentinel"
      class="absolute left-0 w-full h-px top-[80%] md:top-[66%]"
    >
    </div>

    <!-- Overlay -->
    <div
      id="hero-text"
      class="absolute inset-0 flex flex-col items-center justify-center text-center
             opacity-0 transition-opacity duration-700 pointer-events-none"
    >
      <h1 class="text-5xl md:text-7xl font-extrabold text-white drop-shadow-md">
        SYX&nbsp;ESTUDIO
      </h1>
      <p class="mt-4 text-xl md:text-2xl text-white drop-shadow-sm">
        Tu alquiler de estudio en Vallecas
      </p>

      <!-- Botón con dorado translúcido -->
      <a
        href="/contacto"
        class="mt-8 inline-block bg-primary/90 text-white font-semibold
               px-6 py-3 rounded-lg shadow-lg hover:bg-primary/70
               transition-colors pointer-events-auto"
      >
        Reserva tu fecha
      </a>
    </div>
  </section>

  <!-- CONTENIDO DEMO ----------------------------------------------------->
  <section class="prose prose-lg mx-auto px-4 py-20 text-gray-700">
    <h2>Lorem ipsum</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit…</p>
    <p>Vivamus vehicula, turpis eget condimentum imperdiet…</p>
  </section>

  <!-- INTERSECTION OBSERVER --------------------------------------------->
  <script is:inline>
    const sentinel = document.getElementById("hero-sentinel");
    const heroText = document.getElementById("hero-text");

    const observer = new IntersectionObserver(
      ([entry], obs) => {
        if (entry.isIntersecting) {
          heroText.classList.add("opacity-100");
          obs.disconnect();
        }
      },
      { threshold: 0 }
    );

    observer.observe(sentinel);
  </script>
</Layout>
